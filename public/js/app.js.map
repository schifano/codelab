{"version":3,"file":"public/js/app.js","sources":["app/initialize.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhHA;AAAA","sourcesContent":["/*\n\n   ___          _        __       _     \n  / __\\___   __| | ___  / /  __ _| |__  \n / /  / _ \\ / _` |/ _ \\/ /  / _` | '_ \\ \n/ /__| (_) | (_| |  __/ /__| (_| | |_) |\n\\____/\\___/ \\__,_|\\___\\____/\\__,_|_.__/ \n                                        \n\n*/\n\n// We wait for the document to finish loading.\n$(document).ready(function() {\n\n  // Let's create the user object.\n  var user = {};\n      user.nickname = \"anonymous\"; // Default nickname\n      user.textarea = \"\";          // Default text file\n\n  // Now open the socket connection\n  var socket = io.connect('http://:8080');\n\n  //\n  //  Socket.io Listeners/Events\n  //\n\n  // Fired when the server passes the client a session id.\n  socket.on('session-id', function (data) {\n\n    user.session_id = data.session_id;\n\n    socket.emit('update-user', user);\n\n    socket.emit('refresh-friends');\n\n  });\n\n  // Fired when the server responds with partner code.\n  socket.on('retrieve-code', function(textarea) {\n    \n    guestText.setValue(textarea);\n\n  });\n\n  // Fired when the server recieves an update from a partner.\n  socket.on('watch-code', function(partnerUser) {\n\n    guestText.setValue(partnerUser.textarea);\n  \n  });\n\n  // Fired when a friend disconnects.\n  socket.on('friend-disconnect', function () {\n\n      socket.emit('refresh-friends');\n  });\n\n  // Fired when the server broadcasts the current list of online friends.\n  socket.on('friends-broadcast', function (data) {\n\n    $('ul#users').empty();\n\n    for(var i = 0; i < data.length; i++){\n\n      $('ul#users').append( \"<li id=\\\"\" + data[i].session_id + \"\\\"><a href=\\\"#\\\">\" + data[i].nickname + \"</a></li>\");\n\n    }\n\n    $(\"#users li\").on('click', function(e) {\n\n      e.preventDefault();\n\n      user.partner_id = this.id;\n\n      socket.emit('update-user', user);\n\n      socket.emit('fetch-code', user.partner_id); \n\n    });\n\n  });\n\n  //\n  //  jQuery Listeners/Events\n  //\n\n  $(\"div.CodeMirror.cm-s-mdn-like\").on(\"change keydown keyup paste\", function() {\n\n      user.textarea = userText.getValue();\n\n      socket.emit('update-user', user);\n\n  });\n\n\n  $(\"#nicknameForm\").submit(function() {\n\n    user.nickname = $(this).children(\"#nicknameText\").val();\n\n    socket.emit('update-user', user);\n\n    socket.emit('refresh-friends');\n\n    return false;\n  \n  });\n\n});\n\n\n\n\n"]}